<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nespresso Project</title>

  <!-- CSS -->
  <link rel="stylesheet" href="css/index.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Cantarell:wght@400;700&family=Crafty+Girls&family=Manrope:wght@200..800&display=swap"
    rel="stylesheet"
  />

  <!-- Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Flip.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/CustomEase.min.js" defer></script>

  <!-- ✅ 통합 실행 스크립트 -->
  <script defer>
    document.addEventListener("DOMContentLoaded", () => {
      /* ========================== HERO SWIPER ========================== */
      const swiper = new Swiper(".mySwiper", {
        slidesPerView: 1,
        loop: true,
        speed: 1000,
        effect: "fade",
        autoplay: {
          delay: 4500,
          disableOnInteraction: false,
        },
        pagination: {
          el: ".swiper-pagination",
          clickable: true,
        },
      });

      /* ========================== NEWSLETTER ========================== */
      if (typeof gsap === "undefined" || typeof Flip === "undefined") {
        console.error("GSAP/Flip not loaded");
        return;
      }

      // Custom Easing 설정
      if (typeof CustomEase !== "undefined") {
        CustomEase.create("mainEase", "M0,0 C0.65,0.05 0.36,1 1,1");
        CustomEase.create("sideEase", "M0,0 C0.86,0 0.07,1 1,1");
      }

      // .switch 노출 조건
      const container = document.querySelector(".container");
      const switchEl = document.getElementById("switch");

      if (container && switchEl) {
        const updateSwitchVisibility = () => {
          const rect = container.getBoundingClientRect();
          if (rect.top <= 0 && rect.bottom > 0) {
            switchEl.classList.add("is-visible");
          } else {
            switchEl.classList.remove("is-visible");
          }
        };
        window.addEventListener("scroll", updateSwitchVisibility, { passive: true });
        window.addEventListener("resize", updateSwitchVisibility);
        updateSwitchVisibility();
      }

      // GSAP 기반 Newsletter Grid 초기화
      initNewsletterApp();
    });

    /* ========================== FUNCTION: initNewsletterApp ========================== */
    function initNewsletterApp() {
      const TIMING = {
        BASE: 0.512,
        SHORT: 0.384,
        SHORTEST: 0.256,
        LONG: 0.768,
        STAGGER_TINY: 0.032,
        STAGGER_SMALL: 0.064,
      };

      const grid = document.getElementById("grid");
      const gridItems = document.querySelectorAll(".grid-item");
      const sliderImage = document.getElementById("slider-image");
      const sliderImageNext = document.getElementById("slider-image-next");
      const sliderImageBg = document.getElementById("slider-image-bg");
      const transitionOverlay = document.getElementById("transition-overlay");
      const content = document.getElementById("content");
      const contentTitleSpan = content.querySelector(".content-title span");
      const contentParagraph = document.getElementById("content-paragraph");
      const thumbnails = document.querySelectorAll(".thumbnail");

      if (!grid) return;

      let currentMode = "grid";
      let isAnimating = false;
      let activeIndex = 4;

      const imageUrls = Array.from(gridItems).map(
        (i) => i.querySelector(".grid-item-img").style.backgroundImage
      );

      const slideContent = [
        { title: "URBAN GEOMETRY", paragraph: "The city speaks in angles and lines..." },
        { title: "NATURAL ABSTRACTIONS", paragraph: "Nature doesn't try to be beautiful..." },
        { title: "SHADOW PLAY", paragraph: "Light creates shadow. Shadow defines light..." },
        { title: "MINIMALIST FORMS", paragraph: "When we strip away the unnecessary..." },
        { title: "MONOCHROME SERIES", paragraph: "Without color, we see differently..." },
        { title: "TEXTURAL STUDIES", paragraph: "Touch with your eyes. Feel the rough and smooth..." },
      ];

      const updateContent = (idx) => {
        contentTitleSpan.textContent = slideContent[idx].title;
        contentParagraph.textContent = slideContent[idx].paragraph;
      };

      /* --- Slider/Grid 전환 --- */
      const toggleView = (mode) => {
        if (isAnimating || currentMode === mode) return;
        isAnimating = true;
        document.querySelector(".switch-button-current")?.classList.remove("switch-button-current");
        document.querySelector(`.switch-button-${mode}`).classList.add("switch-button-current");
        currentMode = mode;
        (mode === "slider" ? showSliderView() : showGridView()).then(() => (isAnimating = false));
      };

      /* --- Slider 전환 --- */
      const showSliderView = () =>
        new Promise((resolve) => {
          const activeItem = gridItems[activeIndex];
          const rect = activeItem.getBoundingClientRect();
          const url = imageUrls[activeIndex];

          sliderImage.style.backgroundImage = url;
          sliderImageBg.style.backgroundImage = url;
          updateContent(activeIndex);

          gsap.set(sliderImage, {
            width: rect.width,
            height: rect.height,
            x: rect.left,
            y: rect.top,
            opacity: 1,
            visibility: "visible",
          });

          const h = Flip.getState(sliderImage);
          gsap.set(sliderImage, { height: "100vh", y: 0, width: rect.width, x: rect.left });
          Flip.from(h, {
            duration: TIMING.BASE,
            ease: "mainEase",
            onComplete: () => {
              const w = Flip.getState(sliderImage);
              gsap.set(sliderImage, { width: "100vw", x: 0 });
              Flip.from(w, {
                duration: TIMING.BASE,
                ease: "mainEase",
                onComplete: () => {
                  gsap.to(grid, { opacity: 0, duration: TIMING.SHORTEST });
                  gsap.to(content, { opacity: 1, duration: TIMING.SHORT });
                  gsap.to(contentTitleSpan, { y: 0, duration: TIMING.BASE });
                  gsap.to(contentParagraph, { opacity: 1, duration: TIMING.BASE });
                  gsap.to(thumbnails, {
                    opacity: 1,
                    y: 0,
                    duration: TIMING.SHORT,
                    stagger: TIMING.STAGGER_TINY,
                  });
                  resolve();
                },
              });
            },
          });
        });

      const showGridView = () =>
        new Promise((resolve) => {
          const activeItem = gridItems[activeIndex];
          const rect = activeItem.getBoundingClientRect();

          gsap.to([contentParagraph], { opacity: 0, duration: TIMING.SHORT });
          gsap.to(contentTitleSpan, { y: "100%", duration: TIMING.SHORT });
          gsap.to(thumbnails, { opacity: 0, y: 20, duration: TIMING.SHORT });
          gsap.to(grid, { opacity: 1, duration: TIMING.SHORTEST });

          const w = Flip.getState(sliderImage);
          gsap.set(sliderImage, { width: rect.width, x: rect.left, height: "100vh", y: 0 });
          Flip.from(w, {
            duration: TIMING.BASE,
            ease: "mainEase",
            onComplete: () => {
              const h = Flip.getState(sliderImage);
              gsap.set(sliderImage, { height: rect.height, y: rect.top });
              Flip.from(h, {
                duration: TIMING.BASE,
                ease: "mainEase",
                onComplete: () => {
                  gsap.to(sliderImage, {
                    opacity: 0,
                    duration: TIMING.SHORTEST,
                    onComplete: () => {
                      sliderImage.style.visibility = "hidden";
                      gsap.to(content, { opacity: 0, duration: TIMING.SHORT });
                      resolve();
                    },
                  });
                },
              });
            },
          });
        });
    }
  </script>
</head>

<body>
<div class="wrap">
<!-- ================================= HEADER (overlay glass) ============================== -->
<header class="header" role="banner">
    <div class="top">
        <span class="top_text">머신 구매 시, 오리지널 커피 7캡슐로 구성된 웰컴 기프트 증정</span>
    </div>
    <div class="inner">
        <nav class="nav nav--left" aria-label="Primary Left">
        <ul>
            <li><a href="#">coffee</a></li>
            <li><a href="#">machine</a></li>
            <li><a href="#">about</a></li>
        </ul>
        </nav>

        <div class="logo" aria-label="Nespresso home">
        <img src="img/Nespresso-Wordmark-2021-RGB-White.svg" alt="Nespresso" />
        </div>

        <nav class="nav nav--right" aria-label="Primary Right">
        <ul>
            <li><a href="#">login</a></li>
            <li><a href="#">cart</a></li>
            <li><a href="#">search</a></li>
        </ul>
</nav>
    </div><!-- .inner -->
</header>


<!-- ================================= HERO =============================================== -->

<!-- Swiper -->
<div class="swiper mySwiper">
  <div class="swiper-wrapper">

    <!-- Slide 1 -->
    <div class="swiper-slide">
      <section class="section-hero" aria-label="Hero">
        <div class="hero__media" aria-hidden="true">
          <img src="img/hero_coffee_2x.jpg" alt="Nespresso Coffee"/>
        </div>
        <div class="hero__content">
          <div class="hero__caption">
            <div class="hero__en">Nothing Tastes Like Nespresso Coffee</div>
          </div>
          <div class="hero__btn">
            <a href="#">
              <li>
                더 알아보기
                <span></span><span></span><span></span><span></span>
              </li>
            </a>
          </div>
        </div>
      </section>
    </div>

    <!-- Slide 2 -->
    <div class="swiper-slide">
      <section class="section-hero" aria-label="Hero">
        <div class="hero__media" aria-hidden="true">
          <img src="img/Frame.jpg" alt="Vertuo Plus Chrome Edition"/>
        </div>
        <div class="hero__content">
          <div class="hero__caption">
            <div class="hero__en">Vertuo Plus Chrome Edition</div>
          </div>
          <div class="hero__btn">
            <a href="#">
              <li>
                더 알아보기
                <span></span><span></span><span></span><span></span>
              </li>
            </a>
          </div>
        </div>
      </section>
    </div>

    <!-- Slide 3 -->
    <div class="swiper-slide">
      <section class="section-hero" aria-label="Hero">
        <div class="hero__media" aria-hidden="true">
          <img src="img/jesper-brouwers-ioxmlrwJPBI-unsplash.jpg" alt="Coffee Moments"/>
        </div>
        <div class="hero__content">
          <div class="hero__caption">
            <div class="hero__en">Awaken Your Everyday Moments</div>
          </div>
          <div class="hero__btn">
            <a href="#">
              <li>
                더 알아보기
                <span></span><span></span><span></span><span></span>
              </li>
            </a>
          </div>
        </div>
      </section>
    </div>

    <!-- Slide 4 -->
    <div class="swiper-slide">
      <section class="section-hero" aria-label="Hero">
        <div class="hero__media" aria-hidden="true">
          <img src="img/monody-le-OuxB9C_-Kw8-unsplash.jpg" alt="Starbucks by Nespresso"/>
        </div>
        <div class="hero__content">
          <div class="hero__caption">
            <div class="hero__en">Starbucks® by Nespresso</div>
          </div>
          <div class="hero__btn">
            <a href="#">
              <li>
                더 알아보기
                <span></span><span></span><span></span><span></span>
              </li>
            </a>
          </div>
        </div>
      </section>
    </div>

  </div><!-- .swiper-wrapper -->

  <!-- Pagination -->
  <div class="swiper-pagination"></div>

</div><!-- .swiper -->




<!-- ================================= CLUB (4 cards) ===================================== -->
<section class="section-club" aria-labelledby="clubTitle">

    <div class="club__container">
        <div class="club__head">
            <h2 id="clubTitle">Join the Nespresso Club!</h2>
            <p class="sr-only">멤버십 가입 혜택, 머신 가이드, 리사이클, 캡슐 구독 안내</p>
        </div>
    </div><!-- .container -->

    <div class="club__grid">
        <!-- card 1 -->
        <article class="club-card">
        <div class="club-card__img"><img src="img/club-1.jpg" alt="바리스타 레시피"/></div>
        <div class="club-card__body">
        <span class="club-card__tag">바리스타 레시피</span>
        <a class="club-card__cta" href="#">더보기 →</a>
        </div>
        </article>

        <!-- card 2 -->
        <article class="club-card">
        <div class="club-card__img"><img src="img/club-2.jpg" alt="머신 가이드"/></div>
        <div class="club-card__body">
        <span class="club-card__tag">머신 가이드</span>
        <a class="club-card__cta" href="#">자세히 →</a>
        </div>
        </article>

        <!-- card 3 -->
        <article class="club-card">
        <div class="club-card__img"><img src="img/club-3.jpg" alt="캡슐 보관 팁"/></div>
        <div class="club-card__body">
        <span class="club-card__tag">캡슐 보관 팁</span>
        <a class="club-card__cta" href="#">자세히 →</a>
        </div>
        </article>

        <!-- card 4 -->
        <article class="club-card">
        <div class="club-card__img"><img src="img/club-4.jpg" alt="리사이클"/></div>
        <div class="club-card__body">
        <span class="club-card__tag">리사이클</span>
        <a class="club-card__cta" href="#">신청하기 →</a>
        </div>
        </article>
</div>
</section>

<!-- =========================== ORIGINAL vs VERTUO (4 items) ============================= -->
<section class="section-compare" aria-labelledby="compareTitle">
    <div class="compare__intro">
        <h3 id="compareTitle">Original or Vertuo?</h3>
        <p class="sr-only">네스프레소의 두 가지 시스템 비교</p>
    </div>

    <div class="compare__grid">
        <!-- Original machine feature -->
        <article class="compare-card compare-card--tint">
        <div class="compare-card__media" aria-hidden="true"> <video src="img/RTB_original_2.mp4" autoplay muted loop></video> </div>
        <div class="compare-card__content">
        <div class="compare-card__kicker">오리지널 라인</div>
        <h4 class="compare-card__title">클래식한 에스프레소 경험</h4>
        </div>
        <a href="#" class="compare-card__btn" aria-label="자세히">→</a>
        </article>

        <!-- Vertuo system feature -->
        <article class="compare-card">
        <div class="compare-card__media" aria-hidden="true"><video src="img/RTB_vertuo_2.mp4" autoplay muted loop></video></div>
        <div class="compare-card__content">
        <div class="compare-card__kicker">Vertuo 시스템</div>
        <h4 class="compare-card__title">센트리퓨전™으로 더 풍성한 크레마</h4>
        </div>
        <a href="#" class="compare-card__btn" aria-label="자세히">→</a>
        </article>

        <!-- Original accessory -->
        <article class="compare-card">
        <div class="compare-card__media" aria-hidden="true"><img src="img/original_pixie.jpg" alt=""/></div>
        <div class="compare-card__content">
        <div class="compare-card__kicker">오리지널 액세서리</div>
        <h4 class="compare-card__title">머그 & 글라스 컬렉션</h4>
        </div>
        <a href="#" class="compare-card__btn" aria-label="자세히">→</a>
        </article>

        <!-- Vertuo machine colors -->
        <article class="compare-card compare-card--tint">
        <div class="compare-card__media" aria-hidden="true"><img src="img/vertuo_plus.jpg" alt=""/></div>
        <div class="compare-card__content">
        <div class="compare-card__kicker">Vertuo 머신</div>
        <h4 class="compare-card__title">두 가지 컬러, 두 가지 무드</h4>
        </div>
        <a href="#" class="compare-card__btn" aria-label="자세히">→</a>
        </article>
    </div><!-- .compare__grid -->
</section>

<!-- ================================= 3 STEPS ============================================ -->
<section class="section-steps" aria-labelledby="stepsTitle">
    <div class="step">
        <h3 id="stepsTitle" class="sr-only">3Steps</h3>
    <div class="steps__row">
        <article class="step">
            <div class="step__icon">1</div>
            <div>
            <div class="step__title">가까운 부티크 방문</div>
            <p class="step__desc">머신 시연과 무료 시음을 통해 나에게 맞는 커피를 찾아보세요.</p>
            </div><!-- .step__content -->
        </article>
        <article class="step">
            <div class="step__icon">2</div>
            <div>
            <div class="step__title">온라인 주문 & 배송</div>
            <p class="step__desc">주문 다음 날 빠르게 도착하는 편리한 배송 서비스.</p>
            </div>
        </article>
        <article class="step">
            <div class="step__icon">3</div>
            <div>
            <div class="step__title">리사이클 프로그램</div>
            <p class="step__desc">알루미늄 캡슐은 100% 재활용됩니다. 지구를 위한 작은 실천.</p>
            </div>
        </article>
    </div><!-- .steps__row -->

<p class="steps__note">* 70여종 이상의 커피 라인업과 계절 한정 에디션을 부티크에서 만나보세요.</p>
</div><!-- .steps -->
</section>

<!-- ============================== COLLAB PROMO (Blue Bottle) ============================ -->
<section class="section-collab" aria-labelledby="collabTitle">
    <div class="collab">
        <div class="collab__inner">
            <h3 id="collabTitle" class="sr-only">Nespresso × Blue Bottle</h3>


            <a href="#" class="pill" aria-label="블루보틀 블렌드 No.2 자세히 보기">
            <div class="pill__thumb"><img src="img/blue-bottle-2_2x.jpg" alt="블루보틀 블렌드 No.2"/></div>
            <div class="pill__body">
            <div class="pill__title">블루보틀 블렌드 No.2</div>
            <div class="pill__meta">루이보스의 은은함, 잘 익은 베리의 산뜻한 향미</div>
            </div>
            <div class="pill__cta">바로가기 →</div>
            </a>


            <a href="#" class="pill" aria-label="블루보틀 에센셜 세트 자세히 보기">
            <div class="pill__thumb"><img src="img/250908-BB-AERO-SET-2000x2000.jpg" alt="블루보틀 에센셜 세트"/></div>
            <div class="pill__body">
            <div class="pill__title">블루보틀 에센셜 세트</div>
            <div class="pill__meta">머신 + 글라스 + 시즌 한정 캡슐 구성</div>
            </div>
            <div class="pill__cta">구매하기 →</div>
            </a>


            <div class="sus__note" style="margin-top:18px">
            <i>♻</i>
            <span>머신 구매 시, 되돌려 쓸 수 있는 리사이클 백 제공 — 수거된 알루미늄은 다시 자원으로.</span>
            </div>
    </div><!-- .collab -->
    </div><!-- .collab__inner -->
    </div><!-- .collab__outer -->
</section>

<!-- ================================= SUSTAINABILITY CUT ================================= -->
<section class="section-sus">
    <div class="sus__container">
        <div class="img">
            <img src="img/sus-beans.jpg" alt="">
        </div>
        <div class="sus__content">
            <strong>머신 구매 시,오리지널 커피 7캡슐로 구성된 웰컴 기프트 증정</strong>
            <button>더알아보기</button>
        </div>
    </div><!-- .sus -->

</section>

<!-- =============================== GRID / SLIDER =============================== -->
  <!-- Grid -->
  <div class="container">

    <div class="grid-container">
      <div class="grid" id="grid">
        <div class="grid-item" data-index="0">
          <div class="grid-item-img" style="background-image:url(img/letter-1.png)"></div>
        </div>
        <div class="grid-item" data-index="1">
          <div class="grid-item-img" style="background-image:url(img/letter-2.png)"></div>
        </div>
        <div class="grid-item" data-index="2">
          <!-- URL 오탈자 '.' 제거 -->
          <div class="grid-item-img" style="background-image:url(img/letter-3.png)"></div>
        </div>
        <div class="grid-item" data-index="3">
          <div class="grid-item-img" style="background-image:url(img/letter-1.png)"></div>
        </div>
        <div class="grid-item target" id="target-item" data-index="4">
          <div class="grid-item-img" style="background-image:url(img/letter-1.png)"></div>
        </div>
        <div class="grid-item" data-index="5">
          <div class="grid-item-img" style="background-image:url(img/letter-1.png)"></div>
        </div>

      </div>
    </div>

  <!-- Slide layers -->
  <div class="slider-image" id="slider-image"></div>
  <div class="slider-image-bg" id="slider-image-bg"></div>
  <div class="slider-image-next" id="slider-image-next"></div>
  <div class="transition-overlay" id="transition-overlay"></div>

  <!-- Content -->
  <div class="content" id="content">
    <h1 class="content-title"><span>MONOCHROME SERIES</span></h1>
    <div class="content-paragraph" id="content-paragraph">
      Without color, we see differently. Form and texture speak louder. The world simplified to light and dark reveals truths that color often conceals. In this space between extremes, we find clarity. The photograph becomes a mirror reflecting not just what we see, but how we see.
    </div>
  </div>

  <!-- Thumbnails -->
  <div class="thumbnails">
    <div class="thumbnail" data-index="0"><div class="thumbnail-img" style="background-image:url(https://cdn.cosmos.so/dfff1381-f09c-454b-b98d-8a79161c3d25?format=jpeg)"></div></div>
    <div class="thumbnail" data-index="1"><div class="thumbnail-img" style="background-image:url(https://cdn.cosmos.so/c7af8b26-313a-40e4-9081-85f7fde00c22?format=jpeg)"></div></div>
    <div class="thumbnail" data-index="2"><div class="thumbnail-img" style="background-image:url(https://cdn.cosmos.so/03a36d87-af8c-4cfe-bfed-7a3dd502404b?format=jpeg)"></div></div>
    <div class="thumbnail" data-index="3"><div class="thumbnail-img" style="background-image:url(https://cdn.cosmos.so/bdb2a659-2838-4055-a82e-f145c3fd4467?format=jpeg)"></div></div>
    <div class="thumbnail active" data-index="4"><div class="thumbnail-img" style="background-image:url(https://cdn.cosmos.so/fddfc757-d9c3-44f1-af6e-a607c3746738?format=jpeg)"></div></div>
    <div class="thumbnail" data-index="5"><div class="thumbnail-img" style="background-image:url(https://cdn.cosmos.so/51a307de-a9ba-4c9e-ad24-beff1ce023d0?format=jpeg)"></div></div>
  </div>

  <!-- Switch -->
  <div class="switch" id="switch">
    <button class="switch-button switch-button-grid switch-button-current"><span class="indicator-dot"></span>GRID</button>
    <button class="switch-button switch-button-slider"><span class="indicator-dot"></span>SLIDER</button>
  </div>


<!-- ================================= FOOTER ============================================= -->
<footer class="footer" role="contentinfo">
    <div class="cols">
        <div class="f-col">
            <h5>고객센터</h5>
                <ul>
                <li><a href="#">문의하기</a></li>
                <li><a href="#">배송/반품</a></li>
                <li><a href="#">자주 묻는 질문</a></li>
                </ul>
        </div>
        <div class="f-col">
                <h5>멤버십</h5>
                <ul>
                <li><a href="#">클럽 소개</a></li>
                <li><a href="#">혜택 안내</a></li>
                <li><a href="#">리사이클</a></li>
                </ul>
        </div>
    <div class="f-col">
        <h5>브랜드</h5>
        <ul>
        <li><a href="#">지속가능성</a></li>
        <li><a href="#">뉴스룸</a></li>
        <li><a href="#">기업 정보</a></li>
        </ul>
        </div>
    <div class="f-col">
        <h5>팔로우</h5>
        <ul>
        <li><a href="#">Instagram</a></li>
        <li><a href="#">YouTube</a></li>
        <li><a href="#">Facebook</a></li>
        </ul>
        </div>
        </div>
    <div class="footer__bottom">
    <span>© Nestlé Nespresso S.A. 2025</span>
    <span>대한민국</span>
    </div>
    </footer>
    </div><!-- footer -->

</body>
</html>